Вопросы для самоконтроля
1. В чем преимущества использования миграций для управления схемой БД?
Миграции обеспечивают версионирование схемы базы данных, позволяют откатывать изменения, синхронизировать структуру БД между разными средами (разработка, тестирование, продакшн), упрощают командную работу через системы контроля версий и автоматизируют обновления схемы в рамках CI/CD-процессов.

2. Какие типы связей между таблицами вы знаете и как их организовать?
Основные типы:

Один-ко-многим: Внешний ключ в таблице «многие» ссылается на первичный ключ таблицы «один».
Один-к-одному: Внешний ключ в одной таблице с ограничением уникальности.
Многие-ко-многим: Используется промежуточная таблица с двумя внешними ключами.
Самосвязь: Таблица содержит внешний ключ, ссылающийся на свой же первичный ключ (например, для иерархий).
3. Что такое ORM и каковы его преимущества перед нативными SQL-запросами?
ORM (Object-Relational Mapping) — технология, преобразующая данные между реляционными базами данных и объектами в коде. Преимущества: безопасность (защита от SQL-инъекций), абстракция от конкретной СУБД, удобство работы с данными через объекты, автоматическая генерация запросов и поддержка переносимости кода между разными базами данных.

4. Как организовать пагинацию на уровне базы данных?
Для пагинации используют два подхода:

OFFSET/LIMIT: Пропуск определённого числа записей с ограничением вывода. Эффективен для небольших данных.
Курсорная пагинация: Использует уникальный идентификатор (например, ID или временная метка) последней полученной записи для выборки следующей порции. Подходит для больших данных.
5. Что такое транзакции и когда их следует использовать?
Транзакция — набор операций, выполняемых как единое целое (с соблюдением принципов ACID: атомарность, согласованность, изолированность, долговечность). Их применяют при операциях, требующих целостности данных (например, банковские переводы), массовых изменениях или для предотвращения гонок данных.

6. Какие методы оптимизации запросов к базе данных вы знаете?
Основные методы:

Создание индексов для часто используемых полей.
Нормализация или денормализация структуры БД в зависимости от сценария.
Партиционирование больших таблиц.
Кэширование результатов запросов.
Минимизация использования SELECT * и сложных JOIN.
Настройка пулов соединений для снижения накладных расходов.
7. Как организовать обработку ошибок при работе с БД?
Обработка включает:

Перехват исключений с помощью try-catch.
Логирование ошибок с контекстом для анализа.
Автоматический откат транзакций при сбоях.
Повторные попытки выполнения при временных проблемах (например, deadlock).
Отображение пользователю обобщённых сообщений вместо технических деталей.
8. В чем разница между внутренним и внешним соединением таблиц?

Внутреннее соединение (INNER JOIN) возвращает только те записи, которые соответствуют условию соединения в обеих таблицах.
Внешнее соединение (OUTER JOIN) возвращает все записи из одной таблицы и соответствующие из другой (если нет совпадений, поля заполняются NULL). Различают LEFT (все записи из левой таблицы), RIGHT (все из правой) и FULL (все записи из обеих таблиц).